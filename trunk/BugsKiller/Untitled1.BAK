Rem Project: TheBugsKillerTUT01
Rem Created: Thursday, September 16, 2010

Rem ***** Main Source File *****

set display mode 800,600,32
sync on
sync rate 240
hide mouse
//color backdrop RGB(255,255,255)



create animated sprite 1,"Media\Bug.png",4,1,1
sprite 1,rndx(0,600),rndx(0,500),1
OffSetSprite_to_M(1)

load image "Media\curs.png",2
sprite 2,800,600,2
OffSetSprite_to_M(2)


Time = timer() 

DO
	

num=sprite collision(2,1)


if num>0
	if mouseclick()=1
		If click = 0 
			n = n + 5
			Score = Score + 100
			BugsKild = BugsKild + 1 
			clone sprite 1,n
			SET SPRITE FRAME n , 4
			sprite n,sprite x(1),sprite y(1),1
			sprite 1,rndx(0,600),rndx(0,500),1
			ROTATE SPRITE 1, rndx(0,360)
			click = 1			
		endif
	else
		click = 0 
	endif
	
endIf

play sprite 1,1,3,300
MOVE SPRITE  1, .2

If sprite x(1) < 0 or sprite y(1) < 0 or sprite x(1) > 800 or sprite y(1) > 600
sprite 1,rndx(0,600),rndx(0,500),1	
ROTATE SPRITE 1, rndx(0,360)
ENDIF



text 10,10, "" + str$(Score)
text 10,30, "" + str$(TimeValue/1000)
sprite 2,aimX,aimY,2
aimX = mouseX()
aimY = mouseY()

TimeValue = abs( timer() - Time )

If TimeValue > 60000
Goto _scroteloop
ENDIF

	sync
LOOP



Function OffSetSprite_to_M(spriteOffSet)
Offset Sprite spriteOffSet,sprite width(spriteOffSet)/2,sprite height(spriteOffSet)/2
EndFunction

function rndx(min,max)
value=rnd(max-min)+min
endfunction value

_scroteloop:
HIDE ALL SPRITES
do
	click = 1
	text 150,150, "Очки :" + str$(Score)
	text 150,170, "Всего жуков убито :" + str$(BugsKild)
	sync	
LOOP

End